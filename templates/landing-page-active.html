{% extends "layout.html" %}
{% from "macros/sponsor.html" import render_sponsors_list %}

{% block title %}{{ this.title }}{% endblock %}

{% block body %}

    {# ── Intro: conference name, dates, location (config-driven) ── #}
    <section class="intro">
        <div class="content">
            <h1>{{ site.config.PROJECT.name }}</h1>
            <p class="location">darmstadtium, Darmstadt (Frankfurt).</p>
            <p class="conference-date">{{ site.config.PROJECT.sprint_days }}<span class="conference-date description">: Sprints & DjangoGirls</span>.
            </p>
            <p class="conference-date">{{ site.config.PROJECT.conference_days }}<span class="conference-date description">: Three days of conference</span>.
            </p>
            <p class="conference-date">{{ site.config.PROJECT.master_classes_days }}<span class="conference-date description">: Masterclasses</span>.
            </p>
        </div>
    </section>

    {# ── Image reel (from promo_pics databag) ── #}
    <section class="content-block about image-reel-section">
            <div class="content">
                <ul class="image-reel">
                {% for image in bag('promo_pics')['promo_images'] %}
                <li><img src="{{ image }}" alt="conference image"></li>
                {% endfor %}
                </ul>
            </div>
    </section>

    {# ── Featured content carousel (from featured databag) ── #}
    {% from "macros/carousel.html" import render_carousel %}
    {{ render_carousel(
        bag('featured')['featured_items'],
        carousel_id='featured',
        mode='multi',
        image_dir='featured',
        section_label='Featured speakers and sessions'
    ) }}

    {# ── Masterclasses carousel (from masterclasses databag) ── #}
    {{ render_carousel(
        bag('masterclasses')['masterclass_items'],
        carousel_id='masterclasses',
        mode='multi',
        image_dir='masterclasses',
        section_label='Masterclasses'
    ) }}

    {# ── Generic content sections 1–6 ──────────────────────────── #}
    {#                                                               #}
    {#  Each section renders only when its content is non-empty.     #}
    {#  Colors are fixed by position:                                #}
    {#                                                               #}
    {#    1  green-light / green                                     #}
    {#    2  pink-light  / pink                                      #}
    {#    3  blue-light  / blue                                      #}
    {#    4  red-light   / red                                       #}
    {#    5  orange      / yellow                                    #}
    {#    6  blue-lighter / blue                                     #}
    {#                                                               #}
    {#  To reorder homepage content, move text between               #}
    {#  section_N fields in contents.lr — no template edits needed.  #}
    {# ──────────────────────────────────────────────────────────── #}

    {% set section_colors = [
        {'content': 'green-light', 'cta': 'green'},
        {'content': 'pink-light',  'cta': 'pink'},
        {'content': 'blue-light',  'cta': 'blue'},
        {'content': 'red-light',   'cta': 'red'},
        {'content': 'orange',      'cta': 'yellow'},
        {'content': 'blue-lighter','cta': 'blue'}
    ] %}

    {% for colors in section_colors %}
        {% set n = loop.index %}
        {% set section_content = this['section_' ~ n] %}
        {% set section_cta = this['section_' ~ n ~ '_cta'] %}

        {% if section_content %}
        <section class="content-block--{{ colors.content }} content-block">
            <div class="content">
                {{ section_content }}
            </div>
        </section>
        {% endif %}

        {% if section_cta %}
        <section class="content-block--{{ colors.cta }} cta">
            <div class="content">
                {{ section_cta }}
            </div>
        </section>
        {% endif %}
    {% endfor %}

    {# ── Sponsors (from sponsors databag via macro) ── #}
    <section class="sponsors content-block">
        <div class="content">
        </div>
        <div class="content">
            {{ render_sponsors_list() }}
        </div>
    </section>

    {# ── Previous editions ── #}
    <section class="content-block">
        <div class="content">
            {{ this.previous_editions }}
        </div>
    </section>

{% endblock %}
