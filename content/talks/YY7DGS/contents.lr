title: Behind the curtains of the new monitoring API
---
created: 2024-12-02
---
code: YY7DGS
---
speaker_names: Johannes Bechberger
---
abstract: The new low-impact monitoring API introduced with PEP 669 allows us to implement tools like debuggers and coverage with only a small performance impact. Contrary to the previous `sys.settrace` based approach, the new API uses bytecode modification internally, which allows it to be much faster and fine-grained.

This talk will cover the basics of Python bytecode and how the new monitoring API is implemented in CPython, explaining along the way why some monitoring API methods are slower than others.
---
description: In this talk, I'll first give an introduction to Python's bytecode, why we need it, how it speeds up code execution, and how it works in principle. But you don't need a compiler engineering degree; I'll keep it short. Then, I follow this with an overview of how the old monitoring API with `sys.settrace` worked and show why it is probably not the best. The new API is far better, so I briefly introduce it and end this by showing how the new API uses clever bytecode modification to achieve the configurability and speediness it is cherished for.
